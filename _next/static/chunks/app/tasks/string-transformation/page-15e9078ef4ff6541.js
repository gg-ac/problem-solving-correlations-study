(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[117],{1234:()=>{},6852:(e,t,r)=>{"use strict";r.d(t,{PageProvider:()=>s,S:()=>o});var n=r(5155),l=r(63),a=r(2115);let i=(0,a.createContext)(void 0),s=e=>{let{children:t,participantID:r,pages:s,startPageIndex:o}=e,[c,u]=(0,a.useState)(o),[d,m]=(0,a.useState)([]),[v,S]=(0,a.useState)({goNogo:null,visualSearch:null,matrixReasoning:null,memorySpan:null,stringTransformation:null}),p=(0,l.useRouter)();return(0,a.useEffect)(()=>{p.push("/tasks/".concat(s[c]))},[c]),(0,n.jsx)(i.Provider,{value:{participantID:r,pages:s,currentPageIndex:c,taskData:d,scoreData:v,setCurrentPageIndex:u,setTaskData:m,setScoreData:S},children:t})},o=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("usePageContext must be used within a PageProvider");return e}},7600:(e,t,r)=>{Promise.resolve().then(r.bind(r,8868))},7828:(e,t,r)=>{"use strict";r.d(t,{G:()=>l});var n=r(4997);function l(e,t,r){return 100*n.ri((r-e)/t)}},7952:(e,t,r)=>{"use strict";r.d(t,{R:()=>i,h:()=>a});var n=r(8173),l=r.n(n);function a(e,t,r){return Math.floor(r()*(t-e))+e}function i(e,t){let r=l()(t),n=[...e];for(let e=n.length-1;e>0;e--){let t=Math.floor(r()*(e+1));[n[e],n[t]]=[n[t],n[e]]}return n}},8868:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eN});var n,l,a,i,s,o,c,u,d,m,v,S,p,h=r(5155);let g=[{selector:"#level",content:"In this task, you will use rules to change a sequence of symbols so that it matches another sequence of symbols"},{selector:"#state-string",content:"This is the sequence of symbols you will change"},{selector:"#goal-string",content:"And this is the goal sequence you will try to match"},{selector:"#rules",content:'You can change the symbols using the "transformation rules" shown here'},{selector:"#rules-0-lhs",content:"Each rule has an input pattern, on the left side of the arrow..."},{selector:"#rules-0-rhs",content:"...and an output pattern, on the right of the arrow"},{selector:"#level",content:"Let's try using a rule"},{id:"rule-select",selector:"#rules-0",content:"Click this rule to select it",disableActions:!0},{selector:"#state-string-1",highlightedSelectors:["#state-string-1","#state-string-2"],content:"These symbols match the input to the selected rule...",disableActions:!0,position:"right"},{id:"symbol-select",selector:"#state-string-1",highlightedSelectors:["#state-string-1"],content:"...so select the start of the matching symbol pair to apply the rule here",disableActions:!0,position:"right"},{selector:"#state-string",content:"The symbol sequence changed and got a little closer to the goal",disableActions:!1},{selector:"#level",content:"You can keep using rules to change the symbol sequence to match the goal sequence",disableActions:!1},{id:"try-undo",selector:"#button-undo",content:"If you want to undo the last transformation, press the undo button",disableActions:!1},{id:"try-reset",selector:"#button-reset",content:"If you want to reset the puzzle and try again, press the reset button",disableActions:!1},{selector:"#level",content:"Keep using the rules to solve this practice puzzle.",disableActions:!1},{selector:"#level",content:"After you solve this practice puzzle, you will progress to the real puzzles. Try to solve them quickly and in the smallest number of steps possible. Your time will be limited. Good luck!",disableActions:!1}];var E=r(2115);function f(e){return e.reduce((e,t,r)=>(e[r]=t,e),{})}class L{matches(e){return!!this.isGeneric||!!e.isGeneric||e.id===this.id}toObject(){return{TSymbolID:this.id,isGeneric:this.isGeneric}}constructor(e,t=!1){this.id=e,this.isGeneric=t}}class x{static fromSymbolIdStrings(e,t){return new x(_(e.split("")),_(t.split("")))}toObject(){return{input:f(this.input.map(e=>e.toObject())),output:f(this.output.map(e=>e.toObject()))}}get input(){return this._input}get output(){return this._output}apply(e,t){if(t<0||t>e.length-this._input.length)return null;let r=e.slice(t,t+this._input.length),n=this._input.every((e,t)=>e.matches(r[t])),l=new Map;if(!this._input.every((e,t)=>l.has(e)?l.get(e)[0]===r[t]||void l.set(e,[...l.get(e),r[t]]):(l.set(e,[r[t]]),!0)))return null;if(n){let r=[...e.slice(0,t),...this._output,...e.slice(t+this._input.length)];return r.forEach((n,l)=>{if(n.isGeneric){let a=this._input.indexOf(n);r[l]=e[t+a]}}),r}return null}constructor(e,t){if(this._input=e,this._output=t,!this._output.every(e=>!e.isGeneric||this._input.includes(e)))throw Error("Output cannot contain generic TSymbols which do not also exist in the input")}}var I=function(e){return e.S1="a",e.S2="b",e.S3="c",e.S4="d",e.S5="e",e.G1="x",e.G2="y",e.G3="z",e.PLACEHOLDER="",e.ARROW="arrow",e}({});let y=["x","y","z"],_=e=>e.map(e=>{let t=y.includes(e);return new L(e,t)});function T(){return(T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function A(){return(A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function w(){return(w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function R(){return(R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function O(){return(O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function N(){return(N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function C(){return(C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function k(){return(k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function P(){return(P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}let j={[I.S1]:function(e){return E.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:97.31,height:97.31,viewBox:"0 0 25.746 25.746"},e),n||(n=E.createElement("path",{fill:"currentColor",d:"M8.02 4.781a1.618 1.618 0 0 0-1.573 2.012l1.352 5.397H5.592a1.007 1.007 0 0 0-1.009 1.006 1.007 1.007 0 0 0 1.009 1.009h2.044l-1.189 4.75a1.618 1.618 0 0 0 1.573 2.009h9.71a1.618 1.618 0 0 0 1.57-2.01l-1.19-4.75h2.047a1.007 1.007 0 0 0 1.006-1.008 1.007 1.007 0 0 0-1.006-1.006h-2.209L19.3 6.793a1.618 1.618 0 0 0-1.57-2.012zM10.09 8.02h5.565l-1.044 4.171h-3.478zm.88 6.186h3.804l.881 3.523H10.09z",paintOrder:"fill markers stroke"})))},[I.S2]:function(e){return E.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:97.31,height:97.31,viewBox:"0 0 25.746 25.746"},e),l||(l=E.createElement("path",{fill:"currentColor",d:"M12.656 4.749a9 9 0 0 0-4.288 1.204c-4.293 2.479-5.778 8.017-3.3 12.31l.007.01a9 9 0 0 0 1.971 2.334 1.618 1.618 0 0 0 2.57-.712 3.8 3.8 0 0 1 1.363-1.356 3.776 3.776 0 0 1 5.175 1.384q-.147-.405 0 0v.001q.062.161.16.308.053.105.123.2c.579.681 1.6.762 2.28.182a9.03 9.03 0 0 0 1.96-11.361h-.002a9.02 9.02 0 0 0-8.019-4.504m.076 3.235a5.77 5.77 0 0 1 5.14 2.886 5.75 5.75 0 0 1-.766 6.805 5.97 5.97 0 0 0-4.396-1.774 5.9 5.9 0 0 0-2.8.788q-.003 0-.004.003a4.8 4.8 0 0 0-1.22 1.017 5.8 5.8 0 0 1-.818-1.073l-.002-.003a5.75 5.75 0 0 1 2.12-7.877 5.8 5.8 0 0 1 2.746-.772M38.62 2.978a1.62 1.62 0 0 0-1.366.748l-6.893 10.84a1.62 1.62 0 0 0 .339 2.122l6.893 5.65a1.62 1.62 0 0 0 2.053 0l6.893-5.65a1.62 1.62 0 0 0 .34-2.122l-6.894-10.84a1.62 1.62 0 0 0-1.364-.748m1.007 6.215 3.751 5.9-3.751 3.076zm-2.015.003v8.97l-3.75-3.072z",paintOrder:"fill markers stroke"})))},[I.S3]:function(e){return E.createElement("svg",A({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:97.31,height:97.31,viewBox:"0 0 25.746 25.746"},e),a||(a=E.createElement("path",{fill:"currentColor",d:"M-13.09 4.78a9 9 0 0 0-4.288 1.205c-4.293 2.479-5.778 8.017-3.3 12.31l.007.01a9 9 0 0 0 1.971 2.334 1.618 1.618 0 0 0 2.57-.712 3.8 3.8 0 0 1 1.363-1.356 3.776 3.776 0 0 1 5.175 1.384q-.147-.405 0 0v.001q.062.161.16.308.053.105.123.2c.579.681 1.6.762 2.28.182a9.03 9.03 0 0 0 1.96-11.361h-.002a9.02 9.02 0 0 0-8.019-4.504m.076 3.236a5.77 5.77 0 0 1 5.14 2.886 5.75 5.75 0 0 1-.766 6.805 5.97 5.97 0 0 0-4.396-1.774 5.9 5.9 0 0 0-2.8.788q-.003 0-.004.003a4.8 4.8 0 0 0-1.22 1.017 5.8 5.8 0 0 1-.818-1.073l-.002-.003a5.75 5.75 0 0 1 2.12-7.877 5.8 5.8 0 0 1 2.746-.772M12.875 3.01a1.62 1.62 0 0 0-1.367.748l-6.893 10.84a1.62 1.62 0 0 0 .339 2.122l6.893 5.65a1.62 1.62 0 0 0 2.053 0l6.893-5.65a1.62 1.62 0 0 0 .34-2.122l-6.894-10.84a1.62 1.62 0 0 0-1.364-.748m1.006 6.215 3.751 5.9-3.751 3.076zm-2.015.003v8.97l-3.75-3.072z",paintOrder:"fill markers stroke"})))},[I.S4]:function(e){return E.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:97.31,height:97.31,viewBox:"0 0 25.746 25.746"},e),i||(i=E.createElement("path",{fill:"currentColor",d:"M9.492 4.272a5.135 5.135 0 0 0-5.175 4.735 5.15 5.15 0 0 0 1.465 4.022c.143.145.329.235.487.363-.105 2.129.48 4.247 1.997 5.793v.003c2.972 3.017 7.876 3.056 10.893.084 3.018-2.97 3.056-7.875.085-10.893-1.523-1.543-3.634-2.16-5.766-2.086-.122-.159-.208-.344-.348-.487l-.005-.007a5.14 5.14 0 0 0-3.633-1.527M9.47 7.488a1.91 1.91 0 0 1 1.683 1.054 1.62 1.62 0 0 0 1.758.862 4.46 4.46 0 0 1 4.027 1.246 4.44 4.44 0 0 1-.047 6.314 4.44 4.44 0 0 1-6.316-.049 4.46 4.46 0 0 1-1.184-4.042 1.62 1.62 0 0 0-.829-1.766 1.92 1.92 0 0 1-1.018-1.844 1.92 1.92 0 0 1 .567-1.215 1.9 1.9 0 0 1 1.358-.56zm4.307 4.182a2.15 2.15 0 0 0-2.153 2.15 2.15 2.15 0 0 0 2.153 2.153 2.15 2.15 0 0 0 2.15-2.152 2.15 2.15 0 0 0-2.15-2.15",paintOrder:"fill markers stroke"})),s||(s=E.createElement("path",{fill:"currentColor",d:"M36.466 4.653a1.482 1.482 0 0 0-1.42 1.904l.73 2.455-4.367 2.587a1.48 1.48 0 0 0-.494 2.072l4.305 6.74a1.48 1.48 0 0 0 1.246.683h4.305a1.482 1.482 0 0 0 1.4-1.97l-.687-1.97 4.434-3.061a1.48 1.48 0 0 0 .407-2.017l-4.305-6.74a1.48 1.48 0 0 0-1.249-.684zm1.987 2.962h1.507l3.098 4.85-4.187 2.893a1.48 1.48 0 0 0-.557 1.707l.372 1.066H37.28l-3.043-4.764 4.043-2.393a1.48 1.48 0 0 0 .667-1.698z",paintOrder:"markers stroke fill"})))},[I.S5]:function(e){return E.createElement("svg",R({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:97.31,height:97.31,viewBox:"0 0 25.746 25.746"},e),o||(o=E.createElement("path",{fill:"currentColor",d:"M-16.255 4.272a5.135 5.135 0 0 0-5.175 4.735 5.15 5.15 0 0 0 1.465 4.022c.143.145.329.235.487.363-.105 2.129.48 4.247 1.997 5.793v.003c2.972 3.017 7.876 3.056 10.893.084 3.018-2.97 3.056-7.875.085-10.893-1.523-1.543-3.634-2.16-5.766-2.086-.122-.159-.208-.344-.348-.487l-.005-.007a5.14 5.14 0 0 0-3.633-1.527m-.023 3.216a1.91 1.91 0 0 1 1.683 1.054 1.62 1.62 0 0 0 1.758.862A4.46 4.46 0 0 1-8.81 10.65a4.44 4.44 0 0 1-.047 6.314 4.44 4.44 0 0 1-6.316-.049 4.46 4.46 0 0 1-1.184-4.042 1.62 1.62 0 0 0-.829-1.766 1.92 1.92 0 0 1-1.018-1.844 1.92 1.92 0 0 1 .567-1.215 1.9 1.9 0 0 1 1.358-.56zm4.307 4.182a2.15 2.15 0 0 0-2.153 2.15 2.15 2.15 0 0 0 2.153 2.153 2.15 2.15 0 0 0 2.15-2.152 2.15 2.15 0 0 0-2.15-2.15",paintOrder:"fill markers stroke"})),c||(c=E.createElement("path",{fill:"currentColor",d:"M10.719 4.653a1.482 1.482 0 0 0-1.42 1.904l.73 2.455-4.367 2.587a1.48 1.48 0 0 0-.494 2.072l4.305 6.74a1.48 1.48 0 0 0 1.246.683h4.305a1.482 1.482 0 0 0 1.4-1.97l-.687-1.97 4.434-3.061a1.48 1.48 0 0 0 .407-2.017l-4.305-6.74a1.48 1.48 0 0 0-1.249-.684zm1.987 2.962h1.507l3.098 4.85-4.187 2.893a1.48 1.48 0 0 0-.557 1.707l.372 1.066h-1.406L8.49 13.367l4.043-2.393a1.48 1.48 0 0 0 .667-1.698z",paintOrder:"markers stroke fill"})))},[I.G1]:function(e){return E.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:97.31,height:97.31,viewBox:"0 0 25.746 25.746"},e),E.createElement("path",{fill:"currentColor",d:"m320.255 50.795 3.693-5.394-3.108-4.796q-.44-.699-.664-1.194-.214-.507-.214-.968 0-.473.416-.845.428-.383 1.036-.383.699 0 1.081.417.394.405 1.081 1.52l2.478 4.009 2.646-4.009q.326-.507.551-.867.237-.36.45-.597.215-.236.474-.349.27-.124.62-.124.63 0 1.024.383.405.372.405.89 0 .754-.867 2.049l-3.254 4.864 3.502 5.394q.473.71.687 1.182.214.462.214.879 0 .394-.192.72-.191.327-.54.518-.35.192-.788.192-.473 0-.8-.203-.326-.191-.53-.484-.202-.293-.754-1.137l-2.905-4.572-3.085 4.707q-.36.563-.518.788-.146.225-.36.44-.214.213-.507.337t-.687.124q-.608 0-1.013-.372-.394-.371-.394-1.08 0-.834.822-2.039","aria-label":"X",fontFamily:"Arial Rounded MT Bold",fontSize:42.667,paintOrder:"fill markers stroke",style:{lineHeight:2,InkscapeFontSpecification:"&quot",textAlign:"center",whiteSpace:"pre"},transform:"translate(-313.279 -32.369)"}))},[I.G2]:function(e){return E.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:97.31,height:97.31,viewBox:"0 0 25.746 25.746"},e),E.createElement("path",{fill:"currentColor",d:"M356.54 52.248v-5.236l-4.03-6.25q-.53-.844-.755-1.317-.214-.473-.214-.822 0-.575.44-.991.45-.417 1.103-.417.687 0 1.036.394.36.383 1.07 1.543l3.085 5.01 3.119-5.01.473-.777q.191-.315.416-.585.237-.282.518-.428t.687-.147q.63 0 1.047.417.428.405.428.946 0 .439-.214.878-.214.44-.732 1.216l-4.132 6.34v5.236q0 1.024-.473 1.531t-1.205.507q-.743 0-1.205-.496-.461-.506-.461-1.542z","aria-label":"Y",fontFamily:"Arial Rounded MT Bold",fontSize:42.667,paintOrder:"fill markers stroke",style:{lineHeight:2,InkscapeFontSpecification:"&quot",textAlign:"center",whiteSpace:"pre"},transform:"translate(-345.379 -32.369)"}))},[I.G3]:function(e){return E.createElement("svg",C({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:97.31,height:97.31,viewBox:"0 0 25.746 25.746"},e),E.createElement("path",{fill:"currentColor",d:"m420.944 50.153 8.48-10.145h-7.286q-.766 0-1.16-.338-.383-.338-.383-.89 0-.574.383-.923.394-.36 1.16-.36h9.391q1.824 0 1.824 1.7 0 .81-.304 1.295t-1.227 1.565l-7.927 9.436h8.737q.777 0 1.16.327.383.315.383.89 0 .596-.383.945-.383.35-1.16.35h-10.72q-1.092 0-1.643-.485-.552-.495-.552-1.317 0-.282.09-.518t.237-.44q.157-.213.427-.529.27-.326.473-.563","aria-label":"Z",fontFamily:"Arial Rounded MT Bold",fontSize:42.667,paintOrder:"fill markers stroke",style:{lineHeight:2,InkscapeFontSpecification:"&quot",textAlign:"center",whiteSpace:"pre"},transform:"translate(-413.543 -32.369)"}))},[I.PLACEHOLDER]:function(e){return E.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:97.31,height:97.31,viewBox:"0 0 25.746 25.746"},e))},[I.ARROW]:function(e){return E.createElement("svg",P({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:97.31,height:97.31,viewBox:"0 0 25.746 25.746"},e),u||(u=E.createElement("g",{fill:"currentColor",fillOpacity:.247,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.7,paintOrder:"fill markers stroke"},E.createElement("path",{d:"m18.884 10.227 2.646 2.646-2.646 2.646M21.53 12.873H4.217"}))))}},U=e=>{let{symbolID:t}=e,r=j[t];return(0,h.jsx)("div",{className:"flex items-center justify-center text-gray-800 dark:text-gray-200",children:(0,h.jsx)(r,{className:"w-full h-full max-w-[32px] max-h-[32px] object-contain"})})};var M=r(273);let D=e=>{let{symbolID:t,isSelectable:r,isSelected:n,animateOnInvalidRuleUse:l,animateOnValidRuleUse:a,animateOnSuccess:i,onSelect:s,index:o}=e,c={},u={};return l&&(c={x:[0,-5,5,-5,5,0]},u={duration:.5}),a&&(c={scale:[1,1.1,1],y:[0,-5,0]},u={duration:.2,delay:.03*o,ease:"easeInOut"}),i&&(c={y:[0,-5,0]},u={duration:.4,delay:.1*o,ease:"easeInOut"}),(0,h.jsx)(M.P.div,{animate:c,transition:u,onClick:s,className:"flex items-center justify-center aspect-square rounded-md border-2\n                ".concat(n?"bg-black/10 dark:bg-black/30 border-gray-600 dark:border-gray-400":r?"bg-black/5 dark:bg-white/5 border-transparent":" border-transparent bg-transparent dark:bg-transparent dark:bg-black/0","\n                ").concat(r?"cursor-pointer":""),children:(0,h.jsx)(U,{symbolID:t})})};var z=function(e){return e.EXCESS_REST_TIME="EXCESS_REST_TIME",e}({}),H=r(6852),V=r(7828),q=function(e){return e.SELECT_RULE="SELECT_RULE",e.DESELECT_RULE="DESELECT_RULE",e.SELECT_SYMBOL="SELECT_SYMBOL",e.DESELECT_SYMBOL="DESELECT_SYMBOL",e.TRANSFORMATION_FAIL="TRANSFORMATION_FAIL",e.TRANSFORMATION_SUCCESS="TRANSFORMATION_SUCCESS",e.SET_PUZZLE_STATE="SET_PUZZLE_STATE",e.UNDO_TRANSFORMATION="UNDO_TRANSFORMATION",e.RESET_LEVEL="RESET_LEVEL",e.START_TRIAL="START_TRIAL",e.END_TRIAL="END_TRIAL",e.COMPLETE_GAME="COMPLETE_GAME",e.MARK_TRIAL_SOLVED="MARK_TRIAL_SOLVED",e.INCREMENT_LEVEL_TRANSFORMATION_COUNT="INCREMENT_LEVEL_TRANSFORMATION_COUNT",e.SET_LEVEL_TIME="SET_LEVEL_TIME",e.DECREMENT_REST_TIME_REMAINING="DECREMENT_REST_TIME_REMAINING",e.PAUSE_INTERACTION_INVALID_RULE_APPLICATION="PAUSE_INTERACTION_INVALID_RULE_APPLICATION",e.UNPAUSE_INTERACTION_INVALID_RULE_APPLICATION="UNPAUSE_INTERACTION_INVALID_RULE_APPLICATION",e.PAUSE_INTERACTION_VALID_RULE_APPLICATION="PAUSE_INTERACTION_VALID_RULE_APPLICATION",e.UNPAUSE_INTERACTION_VALID_RULE_APPLICATION="UNPAUSE_INTERACTION_VALID_RULE_APPLICATION",e.WARN_STRIKE_REST_TIME="WARN_STRIKE_REST_TIME",e.DEQUEUE_WARNING="DEQUEUE_WARNING",e.STORE_LEVEL_EVENT_RECORD="STORE_LEVEL_EVENT_RECORD",e.SET_MOUSE_POSITION="SET_MOUSE_POSITION",e}(q||{}),B=function(e){return e.SELECT_RULE="rule:select",e.DESELECT_RULE="rule:deselect",e.SELECT_SYMBOL="symbol:select",e.DESELECT_SYMBOL="symbol:deselect",e.SUCCESSFUL_RULE_APPLICATION="rule:apply:success",e.INVALID_RULE_APPLICATION="rule:apply:invalid",e.UNDO_RULE_APPLICATION="rule:apply:undo",e.TRIAL_RESET="trial:reset",e.GOAL_ACHIEVED="goal:achieved",e.START_TRIAL="trial:start",e.END_TRIAL="trial:end",e}(B||{});let F=(0,E.createContext)(void 0),G={rulesetID:"",rules:[],activeSymbolIndex:null,activeRuleIndex:null,invalidSymbolUseIndices:null,invalidRuleUseIndex:null,validRuleUseIndex:null,transformedSymbolIndices:null,interactionPaused:!1,puzzleState:{targetString:[],currentString:[]},timestamp:0,previousAction:null,stepCount:0,startTime:null,currentTime:null,remainingTime:null,continueCountdownTimeRemaining:null,goalAchieved:!1,levelActive:!1,levelEnded:!1},Y={currentLevelIndex:0,levelSchedule:[],currentLevelState:G,undoHistory:[],abuseStrikes:0,abuseWarningStack:[],gameCompleted:!1,levelEventHistory:[],mouseX:0,mouseY:0},W=(e,t)=>{switch(t.type){case"START_TRIAL":let r=e.levelSchedule[t.trialIndex];return{...e,currentLevelIndex:t.trialIndex,currentLevelState:{...G,timestamp:t.timestamp,previousAction:"trial:start",rulesetID:e.levelSchedule[t.trialIndex].rulesetID,rules:e.levelSchedule[t.trialIndex].rules,puzzleState:{currentString:r.startString,targetString:r.targetString},startTime:t.timestamp,currentTime:t.timestamp,levelActive:!0}};case"MARK_TRIAL_SOLVED":return{...e,undoHistory:[],currentLevelState:{...e.currentLevelState,timestamp:t.timestamp,previousAction:"goal:achieved",levelActive:!1,goalAchieved:!0}};case"END_TRIAL":return{...e,undoHistory:[],currentLevelState:{...e.currentLevelState,timestamp:t.timestamp,previousAction:"trial:end",levelActive:!1,levelEnded:!0,continueCountdownTimeRemaining:e.levelSchedule[e.currentLevelIndex].maxRestTime}};case"COMPLETE_GAME":return{...e,undoHistory:[],gameCompleted:!0};case"STORE_LEVEL_EVENT_RECORD":let n=[...e.levelEventHistory,t.payload];if(e.levelEventHistory.length>0){let r=e.levelEventHistory[e.levelEventHistory.length-1];t.payload.previousAction==r.previousAction&&t.payload.timestamp==r.timestamp&&(n=e.levelEventHistory)}return{...e,levelEventHistory:n};case"SET_MOUSE_POSITION":return{...e,mouseX:t.payload.mouseX,mouseY:t.payload.mouseY}}if(e.currentLevelState.levelActive&&!e.currentLevelState.interactionPaused)switch(t.type){case"SELECT_RULE":return{...e,currentLevelState:{...e.currentLevelState,timestamp:t.timestamp,previousAction:"rule:select",activeRuleIndex:t.payload}};case"SELECT_SYMBOL":return{...e,currentLevelState:{...e.currentLevelState,timestamp:t.timestamp,previousAction:"symbol:select",activeSymbolIndex:t.payload}};case"DESELECT_RULE":return{...e,currentLevelState:{...e.currentLevelState,timestamp:t.timestamp,previousAction:"rule:deselect",activeRuleIndex:null}};case"DESELECT_SYMBOL":return{...e,currentLevelState:{...e.currentLevelState,timestamp:t.timestamp,previousAction:"symbol:deselect",activeSymbolIndex:null}};case"UNDO_TRANSFORMATION":let l=e.currentLevelState.puzzleState,a=e.undoHistory;return e.undoHistory.length>0&&(a=a.slice(0,-1),l=e.undoHistory[e.undoHistory.length-1]),{...e,undoHistory:a,currentLevelState:{...e.currentLevelState,timestamp:t.timestamp,previousAction:"rule:apply:undo",activeRuleIndex:null,activeSymbolIndex:null,puzzleState:l}};case"RESET_LEVEL":let i=e.levelSchedule[e.currentLevelIndex];return{...e,undoHistory:[],currentLevelState:{...e.currentLevelState,timestamp:t.timestamp,previousAction:"trial:reset",activeRuleIndex:null,activeSymbolIndex:null,puzzleState:{currentString:i.startString,targetString:i.targetString}}}}switch(t.type){case"TRANSFORMATION_SUCCESS":let s=null,o=e.currentLevelState.activeRuleIndex;return null!=o&&(s=Array.from({length:e.currentLevelState.rules[o].output.length},(t,r)=>e.currentLevelState.activeSymbolIndex+r)),{...e,undoHistory:[...e.undoHistory,e.currentLevelState.puzzleState],currentLevelState:{...e.currentLevelState,timestamp:t.timestamp,previousAction:"rule:apply:success",activeRuleIndex:null,activeSymbolIndex:null,transformedSymbolIndices:s,validRuleUseIndex:e.currentLevelState.activeRuleIndex,puzzleState:t.payload,stepCount:e.currentLevelState.stepCount+1}};case"TRANSFORMATION_FAIL":let c=null;return null!=e.currentLevelState.activeRuleIndex&&null!=e.currentLevelState.activeSymbolIndex&&(c=Array.from({length:e.currentLevelState.rules[e.currentLevelState.activeRuleIndex].input.length},(t,r)=>e.currentLevelState.activeSymbolIndex+r)),{...e,currentLevelState:{...e.currentLevelState,timestamp:t.timestamp,previousAction:"rule:apply:invalid",activeRuleIndex:null,activeSymbolIndex:null,invalidRuleUseIndex:e.currentLevelState.activeRuleIndex,invalidSymbolUseIndices:c}};case"PAUSE_INTERACTION_INVALID_RULE_APPLICATION":case"PAUSE_INTERACTION_VALID_RULE_APPLICATION":return{...e,undoHistory:e.undoHistory,currentLevelState:{...e.currentLevelState,interactionPaused:!0}};case"UNPAUSE_INTERACTION_INVALID_RULE_APPLICATION":return{...e,undoHistory:e.undoHistory,currentLevelState:{...e.currentLevelState,invalidRuleUseIndex:null,invalidSymbolUseIndices:null,interactionPaused:!1}};case"UNPAUSE_INTERACTION_VALID_RULE_APPLICATION":return{...e,undoHistory:e.undoHistory,currentLevelState:{...e.currentLevelState,transformedSymbolIndices:null,validRuleUseIndex:null,interactionPaused:!1}};case"SET_LEVEL_TIME":let u=e.levelSchedule[e.currentLevelIndex],d=u.maxSolveTime;return null!=u.maxSolveTime&&null!=e.currentLevelState.startTime&&(d=u.maxSolveTime-(t.timestamp-e.currentLevelState.startTime)/1e3),{...e,undoHistory:e.undoHistory,currentLevelState:{...e.currentLevelState,currentTime:t.timestamp,remainingTime:d}};case"DECREMENT_REST_TIME_REMAINING":return{...e,undoHistory:e.undoHistory,currentLevelState:{...e.currentLevelState,continueCountdownTimeRemaining:e.currentLevelState.continueCountdownTimeRemaining?e.currentLevelState.continueCountdownTimeRemaining-1:e.currentLevelState.continueCountdownTimeRemaining}};case"WARN_STRIKE_REST_TIME":let m=e.abuseWarningStack.concat([z.EXCESS_REST_TIME]);return console.log(m),{...e,undoHistory:e.undoHistory,abuseStrikes:e.abuseStrikes+1,abuseWarningStack:m,currentLevelState:{...e.currentLevelState}};case"DEQUEUE_WARNING":let v=e.abuseWarningStack;return v.length>0&&(v=v.slice(1,-1)),{...e,undoHistory:e.undoHistory,abuseStrikes:e.abuseStrikes+1,abuseWarningStack:v,currentLevelState:{...e.currentLevelState}}}return e},X=e=>{let{children:t,levelSchedule:r,startLevelIndex:n}=e,[l,a]=(0,E.useReducer)(W,{...Y,levelSchedule:r,currentLevelIndex:n,currentLevelState:{...G}}),{pages:i,currentPageIndex:s,scoreData:o,setCurrentPageIndex:c,setScoreData:u}=(0,H.S)();function d(){var e=new Set,t=new Set;for(var r of l.levelEventHistory)null!=r.previousAction&&(t.add(r.levelNumber),"goal:achieved"==r.previousAction&&e.add(r.levelNumber));return Math.log(12*e.size/t.size+1)}let m=()=>{a({type:"STORE_LEVEL_EVENT_RECORD",payload:{levelNumber:l.currentLevelIndex,rulesetID:l.currentLevelState.rulesetID,isPractice:l.levelSchedule[l.currentLevelIndex].isPractice,isTutorial:l.levelSchedule[l.currentLevelIndex].isTutorial,activeSymbolIndex:l.currentLevelState.activeSymbolIndex,activeRuleIndex:l.currentLevelState.activeRuleIndex,targetString:l.currentLevelState.puzzleState.targetString.map(e=>e.id).join(""),currentString:l.currentLevelState.puzzleState.currentString.map(e=>e.id).join(""),timestamp:l.currentLevelState.timestamp,mouseX:l.mouseX,mouseY:l.mouseY,previousAction:l.currentLevelState.previousAction,stepCount:l.currentLevelState.stepCount}})},v=e=>{m(),a({type:"START_TRIAL",timestamp:performance.now(),trialIndex:e})},S=()=>{m(),a({type:"END_TRIAL",timestamp:performance.now()})},p=()=>{if(l.abuseWarningStack.length>0){let e=l.abuseWarningStack[0];return a({type:"DEQUEUE_WARNING"}),e}return null},g=()=>{if(m(),!(l.currentLevelIndex<l.levelSchedule.length-1))return a({type:"COMPLETE_GAME"}),s+1<i.length&&c(s+1),console.log("log performance score: ".concat(d())),u({...o,stringTransformation:(0,V.G)(1.05,.6,d())}),null;{let e=l.currentLevelIndex+1;return a({type:"START_TRIAL",timestamp:performance.now(),trialIndex:e}),e}};return(0,E.useEffect)(()=>{v(n)},[]),(0,E.useEffect)(()=>{let e=setTimeout(()=>{if(!l.currentLevelState.goalAchieved){let e=l.currentLevelState.currentTime,t=l.currentLevelState.startTime;if(null!=e&&null!=t){let r=l.levelSchedule[l.currentLevelIndex].maxSolveTime;null!==r?(e-t)/1e3<r&&a({type:"SET_LEVEL_TIME",timestamp:performance.now()}):a({type:"SET_LEVEL_TIME",timestamp:performance.now()})}}},5);return()=>clearTimeout(e)},[l.currentLevelState.currentTime]),(0,E.useEffect)(()=>{let e=setTimeout(()=>{null!=l.currentLevelState.continueCountdownTimeRemaining&&(l.currentLevelState.continueCountdownTimeRemaining>0?a({type:"DECREMENT_REST_TIME_REMAINING"}):(a({type:"WARN_STRIKE_REST_TIME"}),g()))},1e3);return()=>clearTimeout(e)},[l.currentLevelState.continueCountdownTimeRemaining]),(0,E.useEffect)(()=>{let e=p();null!=e&&alert(e)},[l.abuseWarningStack]),(0,E.useEffect)(()=>{(()=>{m();let e=l.currentLevelState;if(null!==e.activeRuleIndex&&null!==e.activeSymbolIndex){let t=e.rules[e.activeRuleIndex].apply(e.puzzleState.currentString,e.activeSymbolIndex);null!==t?a({type:"TRANSFORMATION_SUCCESS",timestamp:performance.now(),payload:{targetString:e.puzzleState.targetString,currentString:t}}):a({type:"TRANSFORMATION_FAIL",timestamp:performance.now()})}})()},[l.currentLevelState.activeSymbolIndex,l.currentLevelState.activeRuleIndex]),(0,E.useEffect)(()=>{null!=l.currentLevelState.invalidRuleUseIndex&&a({type:"PAUSE_INTERACTION_INVALID_RULE_APPLICATION",timestamp:performance.now()})},[l.currentLevelState.invalidRuleUseIndex]),(0,E.useEffect)(()=>{null!=l.currentLevelState.validRuleUseIndex&&a({type:"PAUSE_INTERACTION_VALID_RULE_APPLICATION",timestamp:performance.now()})},[l.currentLevelState.validRuleUseIndex]),(0,E.useEffect)(()=>{let e=setTimeout(()=>{l.currentLevelState.interactionPaused&&null!=l.currentLevelState.invalidRuleUseIndex&&a({type:"UNPAUSE_INTERACTION_INVALID_RULE_APPLICATION",timestamp:performance.now()})},500);return()=>clearTimeout(e)},[l.currentLevelState.interactionPaused]),(0,E.useEffect)(()=>{let e=setTimeout(()=>{l.currentLevelState.interactionPaused&&null!=l.currentLevelState.transformedSymbolIndices&&a({type:"UNPAUSE_INTERACTION_VALID_RULE_APPLICATION",timestamp:performance.now()})},l.currentLevelState.transformedSymbolIndices?30*l.currentLevelState.transformedSymbolIndices.length+200:200);return()=>clearTimeout(e)},[l.currentLevelState.interactionPaused]),(0,E.useEffect)(()=>{l.currentLevelState.levelActive&&function(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].matches(t[r]))return!1;return!0}(l.currentLevelState.puzzleState.currentString,l.currentLevelState.puzzleState.targetString)&&(m(),a({type:"MARK_TRIAL_SOLVED",timestamp:performance.now()}))},[l.currentLevelState.puzzleState]),(0,E.useEffect)(()=>{l.currentLevelState.goalAchieved&&S()},[l.currentLevelState.goalAchieved]),(0,E.useEffect)(()=>{null!=l.currentLevelState.remainingTime&&l.currentLevelState.remainingTime<=0&&S()},[l.currentLevelState.remainingTime]),(0,E.useEffect)(()=>{let e=e=>{a({type:"SET_MOUSE_POSITION",payload:{mouseX:e.clientX,mouseY:e.clientY}})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}},[]),(0,h.jsx)(F.Provider,{value:{state:l,storeLevelEventHistory:m,handleActiveSymbolIndexChange:e=>{m(),l.currentLevelState.activeSymbolIndex==e?a({type:"DESELECT_SYMBOL",timestamp:performance.now()}):a({type:"SELECT_SYMBOL",timestamp:performance.now(),payload:e})},handleActiveRuleIndexChange:e=>{m(),l.currentLevelState.activeRuleIndex==e?a({type:"DESELECT_RULE",timestamp:performance.now()}):a({type:"SELECT_RULE",timestamp:performance.now(),payload:e})},handleTransformationSuccess:e=>{m(),a({type:"TRANSFORMATION_SUCCESS",timestamp:performance.now(),payload:e})},handleTransformationFail:()=>{m(),a({type:"TRANSFORMATION_FAIL",timestamp:performance.now()})},handleUndoTransformation:()=>{m(),a({type:"UNDO_TRANSFORMATION",timestamp:performance.now()})},handleResetLevel:()=>{m(),a({type:"RESET_LEVEL",timestamp:performance.now()})},getAbuseWarning:p,exportLevelEventHistory:()=>(m(),l.levelEventHistory),nextLevel:g,startLevel:v,endLevel:S},children:t})},K=()=>{let e=(0,E.useContext)(F);if(!e)throw Error("useGameContext must be used within a GameContext");return e},Z=e=>{let{id:t,symbols:r,maxSymbols:n,interactive:l,selectedIndex:a,onSelect:i}=e,s=Math.max(r.length,n),{state:o}=K();return(0,h.jsx)("div",{id:t,className:"flex justify-center space-x-px sm:space-x-1",children:Array.from({length:s},(e,n)=>{var s,c;let u=r[n];return(0,h.jsx)("div",{id:"".concat(t,"-").concat(n),children:(0,h.jsx)(D,{symbolID:n<r.length?u:I.PLACEHOLDER,isSelectable:l&&n<r.length,isSelected:l&&n===a,animateOnInvalidRuleUse:l&&(null==(s=o.currentLevelState.invalidSymbolUseIndices)?void 0:s.includes(n)),animateOnValidRuleUse:l&&(null==(c=o.currentLevelState.transformedSymbolIndices)?void 0:c.includes(n)),animateOnSuccess:o.currentLevelState.goalAchieved,onSelect:()=>{n<r.length&&i(n)},index:o.currentLevelState.transformedSymbolIndices?n-Math.min(...o.currentLevelState.transformedSymbolIndices):n},n)},n)})})},Q=e=>{let{id:t,inputSymbols:r,outputSymbols:n,maxSymbols:l,isSelected:a,onSelect:i,index:s}=e,{state:o}=K(),c=l-1-r.length-n.length,u=Array(Math.floor(c/2)).fill(I.PLACEHOLDER),d=Array(Math.ceil(c/2)).fill(I.PLACEHOLDER),m=Array.from({length:r.length},(e,t)=>u.length+t);return(0,h.jsxs)(M.P.div,{id:t,animate:o.currentLevelState.validRuleUseIndex==s?{scale:[1,1.05,1]}:{scale:1},transition:{duration:.2,ease:"easeInOut"},onClick:i,className:"flex items-center justify-center rounded-md space-x-px sm:space-x-1 cursor-pointer  border-2\n            ".concat(a?" bg-black/5 dark:bg-black/30 border-gray-600 dark:border-gray-400":"border-transparent"),children:[(0,h.jsx)("div",{id:"".concat(t,"-lhs"),className:"flex",children:[...u,...r].map((e,t)=>(0,h.jsx)("div",{children:(0,h.jsx)(D,{symbolID:e,isSelectable:!1,isSelected:!1,animateOnInvalidRuleUse:o.currentLevelState.invalidRuleUseIndex==s&&m.includes(t),animateOnValidRuleUse:!1,animateOnSuccess:!1,onSelect:()=>{},index:t},s)},t))}),(0,h.jsx)("div",{id:"".concat(t,"-rhs"),className:"flex",children:[I.ARROW,...n,...d].map((e,t)=>(0,h.jsx)("div",{children:(0,h.jsx)(D,{symbolID:e,isSelectable:!1,isSelected:!1,animateOnInvalidRuleUse:o.currentLevelState.invalidRuleUseIndex==s&&m.includes(t),animateOnValidRuleUse:!1,animateOnSuccess:!1,onSelect:()=>{},index:t},s)},t))})]})};function J(){return(J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}let $=function(e){return E.createElement("svg",J({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:97.31,height:97.31,viewBox:"0 0 25.746 25.746"},e),d||(d=E.createElement("path",{fill:"currentColor",d:"M14.087 7.723c-3.794.082-7.513 2.533-10.557 7.14l-.622-4.124-1.741.262 1.049 6.966 6.966-1.05-.263-1.74-3.884.584c2.815-4.237 6.042-6.222 9.089-6.288 3.335-.072 6.724 2.12 9.447 6.86a.876.876 0 0 0 1.196.321.876.876 0 0 0 .322-1.195c-2.924-5.087-6.871-7.826-11.002-7.736",paintOrder:"markers stroke fill"})))},ee=e=>{let{onClick:t}=e;return(0,h.jsx)("div",{onClick:t,className:"flex m-1 items-center justify-center aspect-square button bg-teal-500 rounded-lg cursor-pointer select-none active:translate-y-2 active:[box-shadow:0_0rem_0_0_#0f766e,0_0_0_0.125rem_#00000055] sm:active:[box-shadow:0_0rem_0_0_#0f766e,0_0_0_0.25rem_#00000055] active:border-b-0 [box-shadow:0_0.35rem_0_0_#0f766e,0_0.35rem_0_0.125rem_#00000033] sm:[box-shadow:0_0.5rem_0_0_#0f766e,0_0.5rem_0_0.25rem_#00000033] border-b-2 border-teal-400 grow shrink min-w-4 min-h-4 max-w-16 max-h-16",children:(0,h.jsx)($,{className:"flex stretch grow shrink max-w-[75%] max-h-[75%]"})})};function et(){return(et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}let er=function(e){return E.createElement("svg",et({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:97.31,height:97.31,viewBox:"0 0 25.746 25.746"},e),m||(m=E.createElement("g",{fill:"currentColor",strokeLinecap:"round",paintOrder:"markers stroke fill"},E.createElement("path",{d:"M13.269 2.549c-3.28.047-6.56 2.454-8.046 7.279L3.349 6.047l-1.578.782L4.9 13.14l6.311-3.128-.782-1.578-3.682 1.825c1.371-4.472 4.185-6.212 6.802-6.12 2.762.095 5.481 2.274 6.18 6.343a.793.793 0 0 0 .916.649.793.793 0 0 0 .647-.917c-.802-4.667-4.119-7.538-7.688-7.662a7 7 0 0 0-.335-.003M20.84 12.663l-6.31 3.128.781 1.578 3.671-1.82c-1.378 4.428-4.179 6.15-6.784 6.06-2.762-.096-5.481-2.277-6.18-6.346a.793.793 0 0 0-.916-.646.793.793 0 0 0-.647.916c.802 4.668 4.12 7.536 7.688 7.66 3.38.117 6.824-2.272 8.368-7.23l1.88 3.793 1.578-.782z"}))))},en=e=>{let{onClick:t}=e;return(0,h.jsx)("div",{onClick:t,className:"flex m-1  items-center justify-center aspect-square button bg-rose-500 rounded-full cursor-pointer select-none active:translate-y-2 active:[box-shadow:0_0rem_0_0_#be123c,0_0_0_0.125rem_#00000055] sm:active:[box-shadow:0_0rem_0_0_#be123c,0_0_0_0.25rem_#00000055] active:border-b-0 [box-shadow:0_0.35rem_0_0_#be123c,0_0.35rem_0_0.125rem_#00000033] sm:[box-shadow:0_0.5rem_0_0_#be123c,0_0.5rem_0_0.25rem_#00000033] border-b-2 border-rose-400 grow shrink min-w-4 min-h-4 max-w-16 max-h-16",children:(0,h.jsx)(er,{className:"flex stretch grow shrink max-w-[75%] max-h-[75%]"})})};var el=r(4679),ea=r.n(el),ei=r(1412);let es=e=>{let{levelIndex:t}=e,{state:r,handleActiveSymbolIndexChange:n,handleActiveRuleIndexChange:l,handleUndoTransformation:a,handleResetLevel:i,exportLevelEventHistory:s}=K(),{taskData:o,setTaskData:c}=(0,H.S)(),{setIsOpen:u,setCurrentStep:d,isOpen:m,currentStep:v,steps:S}=(0,ei.Mw)();function p(){r.levelSchedule[r.currentLevelIndex].isTutorial&&("symbol-select"==S[v].id&&d(v+1),"rule-select"==S[v].id&&d(v+1))}function g(){if(r.levelSchedule[r.currentLevelIndex].isTutorial&&m){var e=S[v].id;return!!(void 0!==e&&["symbol-select","rule-select","try-undo","try-redo"].includes(e))}return!0}return(0,E.useEffect)(()=>{r.levelSchedule[r.currentLevelIndex].isTutorial&&u(!0)},[]),(0,E.useEffect)(()=>{r.gameCompleted&&c([...o,{taskName:"string-transformation",data:s()}])},[r.gameCompleted]),(0,h.jsx)("div",{id:"level",className:"flex flex-col justify-center items-center h-full bg-linear-to-t from-stone-400 to-stone-300 dark:from-gray-900 dark:to-slate-900 font-(family-name:--font-geist-sans)",children:(0,h.jsxs)("div",{className:"flex flex-col justify-center h-full p-1 m-1 sm:p-5 sm:m-5 bg-stone-200 dark:bg-slate-800 shadow-inset-game-panel-background border-2 border-stone-500 dark:border-slate-700 rounded-2xl max-w-xl",children:[(0,h.jsxs)("div",{className:"grid grid-cols-5 mx-4 space-x-2",children:[(0,h.jsxs)("div",{className:"grid col-span-2 grid-cols-2 content-center gap-2",children:[null!==r.levelSchedule[r.currentLevelIndex].maxSolveTime?(0,h.jsx)("div",{className:"py-2 my-2 max-h-16 border-2 border-gray-300 dark:border-gray-700 shadow-lg dark:shadow-inset-game-panel bg-gray-100 dark:bg-gray-900 dark:text-gray-200 text-xl sm:text-3xl text-center select-none flex justify-center rounded-xl overflow-hidden ".concat(ea().className),children:function(e){return e===1/0||null===e?"":e.toString()}(r.currentLevelState.remainingTime?Math.round(r.currentLevelState.remainingTime):r.levelSchedule[r.currentLevelIndex].maxSolveTime)}):(0,h.jsx)(h.Fragment,{}),(0,h.jsxs)("div",{className:"py-2 my-2 max-h-16 border-2 border-gray-300 dark:border-gray-700 shadow-lg dark:shadow-inset-game-panel bg-gray-100 dark:bg-gray-900 dark:text-gray-200 select-none flex items-baseline justify-center rounded-xl overflow-hidden",children:[(0,h.jsx)("span",{className:"text-xl sm:text-3xl ".concat(ea().className),children:r.currentLevelIndex+1}),(0,h.jsxs)("span",{className:"text-md sm:text-lg ".concat(ea().className),children:["/",r.levelSchedule.length]})]})]}),(0,h.jsx)("div",{id:"button-undo",className:"py-2 my-2 col-span-1 col-start-4 dark:text-gray-200 flex justify-center rounded-xl overflow-hidden",children:(0,h.jsx)(ee,{onClick:()=>{g()&&a()}})}),(0,h.jsx)("div",{id:"button-reset",className:"py-2 my-2 col-span-1 col-start-5 dark:text-gray-200 flex justify-center rounded-xl overflow-hidden",children:(0,h.jsx)(en,{onClick:()=>{g()&&i()}})})]}),(0,h.jsxs)("div",{className:"flex-col shrink-0 p-2 px-4 mx-4 space-y-4 border-2 border-gray-300 dark:border-gray-700 shadow-lg dark:shadow-inset-game-panel bg-gray-100 dark:bg-gray-900 flex justify-center rounded-2xl overflow-hidden",children:[(0,h.jsx)(Z,{id:"goal-string",symbols:r.currentLevelState.puzzleState.targetString.map(e=>e.id),interactive:!1,selectedIndex:null,maxSymbols:8,onSelect:()=>{}}),(0,h.jsx)(Z,{id:"state-string",symbols:r.currentLevelState.puzzleState.currentString.map(e=>e.id),interactive:!0,selectedIndex:r.currentLevelState.activeSymbolIndex,maxSymbols:8,onSelect:e=>{g()&&(n(e),p())}})]}),(0,h.jsx)("div",{id:"rules",className:"flex-col grow p-4 m-4 space-y-4 border-2 border-gray-300 dark:border-gray-700 bg-gray-100 dark:bg-gray-900 shadow-lg dark:shadow-inset-game-panel rounded-2xl overflow-y-auto",children:r.currentLevelState.rules.map((e,t)=>(0,h.jsx)(Q,{id:"rules-".concat(t),index:t,maxSymbols:9,inputSymbols:e.input.map(e=>e.id),outputSymbols:e.output.map(e=>e.id),isSelected:r.currentLevelState.activeRuleIndex===t,onSelect:()=>{g()&&(l(t),p())}},t))})]})})};var eo=r(9615),ec=r.n(eo);function eu(){return(eu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}let ed=function(e){return E.createElement("svg",eu({xmlns:"http://www.w3.org/2000/svg",width:137.82,height:137.82,viewBox:"0 0 36.465 36.465"},e),v||(v=E.createElement("g",{fill:"currentColor",paintOrder:"markers stroke fill"},E.createElement("path",{d:"M18.232 0C8.145 0 0 8.145 0 18.232s8.145 18.233 18.232 18.233 18.233-8.145 18.233-18.233C36.465 8.145 28.32 0 18.232 0m0 1.465A16.714 16.714 0 0 1 35 18.232 16.714 16.714 0 0 1 18.232 35 16.714 16.714 0 0 1 1.465 18.232 16.714 16.714 0 0 1 18.232 1.465"}),E.createElement("path",{d:"M25.732 11.9a1.33 1.33 0 0 0-.941.391l-9.059 9.059-4.058-4.059a1.33 1.33 0 0 0-1.883 0 1.33 1.33 0 0 0 0 1.883l5 5a1.33 1.33 0 0 0 1.883 0l10-10a1.33 1.33 0 0 0 0-1.883 1.33 1.33 0 0 0-.942-.39Z"}))))};function em(){return(em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}let ev=function(e){return E.createElement("svg",em({xmlns:"http://www.w3.org/2000/svg",width:137.82,height:137.82,viewBox:"0 0 36.465 36.465"},e),S||(S=E.createElement("g",{fill:"currentColor",paintOrder:"markers stroke fill"},E.createElement("path",{d:"M18.232 0C8.145 0 0 8.145 0 18.232s8.145 18.233 18.232 18.233 18.233-8.145 18.233-18.233C36.465 8.145 28.32 0 18.232 0m0 1.465A16.714 16.714 0 0 1 35 18.232 16.714 16.714 0 0 1 18.232 35 16.714 16.714 0 0 1 1.465 18.232 16.714 16.714 0 0 1 18.232 1.465"}),E.createElement("path",{d:"M13.232 11.9a1.33 1.33 0 0 0-.941.391 1.33 1.33 0 0 0 0 1.883l4.059 4.058-4.06 4.059a1.33 1.33 0 0 0 0 1.883 1.33 1.33 0 0 0 1.884 0l4.058-4.059 4.059 4.059a1.33 1.33 0 0 0 1.883 0 1.33 1.33 0 0 0 0-1.883l-4.059-4.059 4.059-4.058a1.33 1.33 0 0 0 0-1.883 1.33 1.33 0 0 0-.942-.39 1.33 1.33 0 0 0-.941.39l-4.059 4.058-4.058-4.058a1.33 1.33 0 0 0-.942-.39Z"}))))},eS=()=>{let{state:e,nextLevel:t}=K(),r=null!==e.currentLevelState.currentTime&&null!==e.currentLevelState.startTime?Math.round((e.currentLevelState.currentTime-e.currentLevelState.startTime)/1e3):0;return(0,h.jsx)("div",{className:"flex flex-col justify-center items-center h-full bg-linear-to-t from-stone-400 to-stone-300 dark:from-gray-900 dark:to-slate-900 font-(family-name:--font-geist-sans)",children:(0,h.jsxs)("div",{className:" text-gray-800 dark:text-gray-200 flex flex-col justify-center items-center grow p-4 m-4 space-y-20 min-w-[500px] border-2 border-gray-300 dark:border-gray-700 bg-gray-100 dark:bg-gray-900 shadow-lg dark:shadow-inset-game-panel rounded-2xl overflow-y-auto",children:[e.currentLevelState.goalAchieved?(0,h.jsx)(ed,{}):(0,h.jsx)(ev,{}),(0,h.jsxs)("span",{className:"text-2xl",children:["Level ",e.currentLevelState.goalAchieved?" Completed in ".concat(r,"s"):"Failed"]}),(0,h.jsxs)("button",{onClick:()=>{t()},className:"bg-transparent hover:bg-gray-500 text-gray-700 dark:text-gray-200 font-semibold hover:text-white py-2 px-4 border-2 border-gray-500 hover:border-transparent rounded ".concat(ec().className),children:["Press to Continue "," (".concat(e.currentLevelState.continueCountdownTimeRemaining,")")]})]})})},ep=()=>{let{state:e}=K();return(0,h.jsx)("div",{className:"h-full",children:e.currentLevelState.levelEnded?(0,h.jsx)(eS,{levelIndex:e.currentLevelIndex}):(0,h.jsx)(es,{levelIndex:e.currentLevelIndex})})};function eh(){return(eh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}let eg=function(e){return E.createElement("svg",eh({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:800,height:800,viewBox:"0 0 512 512"},e),p||(p=E.createElement("path",{fill:"currentColor",d:"M295 382.12c3.12 3.12 7.22 4.69 11.31 4.69s8.19-1.56 11.31-4.69l114.81-114.81c.7-.7 1.32-1.46 1.86-2.25l.1-.13c.24-.35.45-.72.66-1.09.05-.09.1-.17.15-.26.19-.35.35-.7.51-1.06.05-.12.12-.24.17-.36.14-.34.26-.69.38-1.03.05-.15.11-.3.16-.45.11-.35.19-.7.27-1.06.04-.16.08-.31.11-.47.08-.42.14-.84.19-1.26.01-.1.03-.2.04-.3q.165-1.605 0-3.21c-.02-.17-.05-.34-.07-.52-.05-.34-.09-.69-.16-1.02-.05-.24-.12-.48-.17-.72-.07-.27-.12-.53-.2-.8-.08-.25-.17-.5-.26-.74s-.17-.49-.27-.73c-.1-.25-.22-.49-.34-.73-.11-.23-.21-.46-.33-.69-.13-.25-.29-.49-.43-.74-.12-.2-.23-.4-.37-.6-.2-.3-.42-.59-.65-.88-.1-.12-.18-.25-.28-.37-.35-.43-.72-.84-1.12-1.23L317.63 129.88c-6.25-6.25-16.38-6.25-22.63 0s-6.25 16.38 0 22.63L382.49 240H90.88c-8.84 0-16 7.16-16 16s7.16 16 16 16H382.5L295 359.5c-6.25 6.24-6.25 16.38 0 22.62"})))};var eE=r(7952);let ef=new L(I.S1,!1),eL=new L(I.S2,!1),ex=new L(I.S3,!1),eI=new L(I.S4,!1),ey=new x([ef,eL],[eL]),e_=new x([ex,eL],[eI]),eT=new x([eI,eL,ef],[eI,ex]),eb=[new x([ef,eL],[ef]),new x([ef,ef],[ex]),new x([eL,ef],[eI,ex]),new x([eI,ex],[ef,eL]),new x([eL,ef,ex],[eL,ex]),new x([eI,ex,eL],[eL,ef,ex])],eA=[[[eI,ef,eL,ef,eI,ef,eL,ex],[ef,eI,ef,eL,ex]],[[eL,ex,ef,eI,ex,ef,eL],[eL,ex,ef,ef,ef,ex]],[[eI,ex,ef,eL,eI,eI,ef,eL],[ef,ef,ex,eI,eI,ef,eL]],[[ex,eI,ef,ef,eL,ex,eI,ex],[ex,ef,ex,eI,ex]],[[eI,ex,ef,eL,eI,eI,ex,ex],[ef,ef,ex,eI,eI,ex,ex]]],ew=[[[eL,eI,eL,ef,eI,eL,eI,ex],[eL,eI,eL,ef,eI,ef]],[[eI,ex,eI,ex,eL,eI],[ef,eL,ex,eL,eI]],[[ef,ex,eI,ex,eI,ex,eL],[ef,ex,ef,eL,ex,eL]],[[ex,eI,ex,eI,ex,eL],[ex,ef,eL,ex,eL]],[[ef,eL,ex,ex,eL,eI,ex,eI],[ef,eL,ex,ex,ef,eI]]],eR=[[[eL,eL,ef,ex,ef,ef,ex,ex],[ef,ex,ef,ef,ex,ex]],[[ex,ef,ef,ex,eI,ex,eL,ef],[ex,ef,ef,ex,ef,eL,ex]],[[ef,ef,ex,ex,eL,eI,ef,ef],[ef,ef,ex,ex,ef]],[[eL,eI,ef,ef,eI,eL,ef],[ef,eI,eL,ef]],[[eL,ef,eI,eL,eL,ef,ex],[eL,ef,eI,ef,ex]]],eO={rulesetID:"demo",isPractice:!0,isTutorial:!0,rules:[ey,e_,eT],startString:[ex,ef,eL,eI,ef],targetString:[eI,eI,ef],maxSolveTime:1/0,maxRestTime:30};function eN(){let{participantID:e}=(0,H.S)(),{setIsOpen:t}=(0,ei.Mw)();return(0,E.useEffect)(()=>{t(!0)},[]),(0,h.jsx)(ei.AY,{steps:g,padding:0,disableKeyboardNavigation:!0,onClickMask:()=>{},className:"bg-slate-900 text-white text-lg font-mono shadow-lg shadow-black/50 border-2 border-gray-500",nextButton:e=>{let{currentStep:t,stepsLength:r,setIsOpen:n,setCurrentStep:l,steps:a}=e,i=t===r-1;return(0,h.jsx)("button",{className:"cursor-pointer",onClick:()=>{if(i)n(!1);else{if(void 0!==a[t].id&&["rule-select","symbol-select"].includes(a[t].id))return;l(e=>e===a.length-1?0:e+1)}},children:(0,h.jsx)(eg,{className:"w-[24px] h-[24px]"})})},prevButton:e=>{let{}=e;return(0,h.jsx)("div",{})},showDots:!1,showBadge:!1,showCloseButton:!1,styles:{popover:e=>({...e,"--reactour-accent":"#000000ff",backgroundColor:"",color:"",boxShadow:"",borderRadius:10,margin:10}),maskArea:e=>({...e,rx:10}),maskWrapper:e=>({...e,opacity:.8,color:"#000000ff",backdropFilter:"blur(8px)"}),controls:e=>({...e,marginTop:20})},children:(0,h.jsx)("div",{className:"h-screen flex flex-col",children:(0,h.jsx)(X,{levelSchedule:function(e){let t=[];for(let e of[eA,ew,eR]){let r=e.map(e=>({rulesetID:"a",isPractice:!1,isTutorial:!1,rules:eb,startString:e[0],targetString:e[1],maxSolveTime:75,maxRestTime:30}));t.push(r)}return[eO,...(0,eE.R)(t.flat(),e)]}(e),startLevelIndex:0,children:(0,h.jsx)(ep,{})})})})}}},e=>{e.O(0,[297,256,278,441,255,358],()=>e(e.s=7600)),_N_E=e.O()}]);