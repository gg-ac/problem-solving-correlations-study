(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[810],{1234:()=>{},4010:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>_});var a=r(5155),i=r(2115);function n(e,t){if(null===t)return 0;let r=e.join(""),a=r.length,i=Math.max(0,a-t.length),n=0;for(let e=i;e<a;e++)r[e]===t[e-i]&&n++;return n}function s(e,t){if(null===t)return[];let r=e.join(""),a=r.length,i=Math.max(0,a-t.length),n=[];for(let e=i;e<a;e++){let a=!1;r[e]===t[e-i]&&(a=!0),n=[...n,a]}return n}var l=r(6852),c=r(4997),o=r(7828),d=r(5366),m=[1,2,3,4,5,6,7,8,9].map(e=>new d.Howl({src:["/problem-solving-correlations-study/audio/digits/sound_".concat(e,".mp3")]}));let u=(0,i.createContext)(void 0),S={startTime:0,currentTime:0,confirmPressed:!1,trialStarted:!1,trialEnded:!1,responseStarted:!1,responseEnded:!1,feedbackStarted:!1,feedbackEnded:!1,currentDigitIndex:null,responseString:null},p={trialState:S,betweenDigitTimeInterval:250,currentTrialIndex:0,trialSpecs:[],trialEventHistory:[],blockStarted:!1,blockCompleted:!1,fixationActive:!0},x=(e,t)=>{let r=e,a=e.trialEventHistory;switch(t.type){case"START_TRIAL":r={...e,currentTrialIndex:t.trialIndex,trialState:{...S,startTime:t.timestamp,currentTime:t.timestamp,trialStarted:!0}};break;case"SET_TRIAL_INDEX":r={...e,currentTrialIndex:t.trialIndex};break;case"END_TRIAL":r={...e,trialState:{...e.trialState,currentTime:t.timestamp,trialStarted:!1,trialEnded:!0}};break;case"START_FEEDBACK":r={...e,trialState:{...e.trialState,currentTime:t.timestamp,feedbackStarted:!0}};break;case"END_FEEDBACK":r={...e,trialState:{...e.trialState,currentTime:t.timestamp,feedbackStarted:!1,feedbackEnded:!0}};break;case"SET_TRIAL_TIME":r={...e,trialState:{...e.trialState,currentTime:t.timestamp}};break;case"PRESS_CONFIRM":r={...e,trialState:{...e.trialState,currentTime:t.timestamp,confirmPressed:!0}};break;case"START_TASK_BLOCK":r={...e,blockStarted:!0,trialState:{...e.trialState,currentTime:t.timestamp}};break;case"COMPLETE_TASK_BLOCK":r={...e,blockCompleted:!0,trialState:{...e.trialState,currentTime:t.timestamp}};break;case"SHOW_FIXATION":r={...e,fixationActive:!0,trialState:{...e.trialState,currentTime:t.timestamp}};break;case"CLEAR_FIXATION":r={...e,fixationActive:!1,trialState:{...e.trialState,currentTime:t.timestamp}};break;case"START_RESPONSE_TIME":r={...e,trialState:{...e.trialState,currentTime:t.timestamp,responseStarted:!0}};break;case"END_RESPONSE_TIME":r={...e,trialState:{...e.trialState,currentTime:t.timestamp,responseEnded:!0}};break;case"SET_RESPONSE_STRING":r={...e,trialState:{...e.trialState,currentTime:t.timestamp,responseString:t.str}};break;case"SET_DISPLAYED_DIGIT_INDEX":r={...e,trialState:{...e.trialState,currentTime:t.timestamp,currentDigitIndex:t.digit}},null!=t.digit&&(console.log(e.trialSpecs[e.currentTrialIndex].digits[t.digit]),m[e.trialSpecs[e.currentTrialIndex].digits[t.digit]-1].play())}let i=n(r.trialSpecs[r.currentTrialIndex].digits,r.trialState.responseString);if("SET_DISPLAYED_DIGIT_INDEX"!=t.type){let n={trialNumber:r.currentTrialIndex,timestamp:r.trialState.currentTime,action:t.type,responseString:r.trialState.responseString,targetString:r.trialSpecs[r.currentTrialIndex].digits.join(""),digitsCorrect:i};a=[...e.trialEventHistory,n]}return{...r,trialEventHistory:a}},f=e=>{let{children:t,trialSpecs:r,startTrialIndex:n}=e,[s,d]=(0,i.useReducer)(x,{...p,trialSpecs:r,currentTrialIndex:n}),{pages:m,currentPageIndex:S,scoreData:f,setCurrentPageIndex:g,setScoreData:T}=(0,l.S)();function h(){var e=[];for(var t of s.trialEventHistory)"END_TRIAL"==t.action&&null!=t.digitsCorrect&&e.push(t.digitsCorrect);return(0,c.RE)(e)}let E=e=>{d({type:"START_TRIAL",timestamp:performance.now(),trialIndex:e})},y=()=>{d({type:"END_TRIAL",timestamp:performance.now()})},I=()=>{d({type:"END_RESPONSE_TIME",timestamp:performance.now()})},v=()=>{d({type:"START_FEEDBACK",timestamp:performance.now()})},_=!1;return(0,i.useEffect)(()=>{s.blockStarted&&!s.fixationActive&&E(s.currentTrialIndex)},[s.blockStarted,s.fixationActive]),(0,i.useEffect)(()=>{let e=e=>{"Enter"==e.code&&(!_&&(s.trialState.confirmPressed||s.trialState.trialEnded||s.blockStarted||d({type:"START_TASK_BLOCK",timestamp:performance.now()})),_=!0)},t=e=>{"Enter"==e.code&&(_=!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}}),(0,i.useEffect)(()=>{let e=setTimeout(()=>{!s.trialState.responseStarted||s.trialState.responseEnded||s.trialState.trialEnded||(I(),y(),v())},s.trialSpecs[s.currentTrialIndex].maxResponseTime);return()=>clearTimeout(e)},[s.trialState.responseStarted,s.trialState.responseEnded,s.trialState.trialEnded]),(0,i.useEffect)(()=>{let e=setTimeout(()=>{s.trialState.feedbackStarted&&!s.trialState.feedbackEnded&&(d({type:"END_FEEDBACK",timestamp:performance.now()}),(()=>{if(console.log(s.currentTrialIndex),!(s.currentTrialIndex<s.trialSpecs.length-1))return d({type:"COMPLETE_TASK_BLOCK",timestamp:performance.now()}),S+1<m.length&&g(S+1),console.log("mean items recalled: ".concat(h())),T({...f,memorySpan:(0,o.G)(3.14,.68,h())});{let e=s.currentTrialIndex+1;return d({type:"SET_TRIAL_INDEX",timestamp:performance.now(),trialIndex:e}),d({type:"SHOW_FIXATION",timestamp:performance.now()})}})())},s.trialSpecs[s.currentTrialIndex].feedbackTime);return()=>clearTimeout(e)},[s.trialState.feedbackStarted,s.currentTrialIndex]),(0,i.useEffect)(()=>{let e=setTimeout(()=>{s.blockStarted&&s.fixationActive&&d({type:"CLEAR_FIXATION",timestamp:performance.now()})},1e3);return()=>clearTimeout(e)},[s.fixationActive,s.blockStarted]),(0,i.useEffect)(()=>{let e=setTimeout(()=>{if(s.trialState.trialStarted&&!s.trialState.trialEnded){let t=null;if((t=null===s.trialState.currentDigitIndex?0:s.trialState.currentDigitIndex+1)>=s.trialSpecs[s.currentTrialIndex].digits.length)d({type:"START_RESPONSE_TIME",timestamp:performance.now()});else{var e;e=t,d({type:"SET_DISPLAYED_DIGIT_INDEX",timestamp:performance.now(),digit:e})}}},s.betweenDigitTimeInterval);return()=>clearTimeout(e)},[s.trialState.trialStarted,s.trialState.currentDigitIndex]),(0,a.jsx)(u.Provider,{value:{state:s,exportTrialEventHistory:()=>s.trialEventHistory,setResponseString:e=>{s.trialState.responseStarted&&!s.trialState.responseEnded&&d({type:"SET_RESPONSE_STRING",timestamp:performance.now(),str:e})},startTrial:E,skipResponseWait:()=>{I(),y(),v()}},children:t})};var g=r(9141);function T(){return(0,a.jsxs)("div",{className:"h-full w-full grid font-sans grid-rows-5 gap-2 px-80 py-10",children:[(0,a.jsx)("div",{className:"flex items-end py-10",children:(0,a.jsx)("span",{className:"text-2xl",children:"Memory Span"})}),(0,a.jsx)("div",{className:"overflow-auto text-md row-span-3 grid grid-rows-3 gap-8 px-10 mx-10 rounded-lg border-2 border-dashed",children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{className:"py-5",children:"You will hear a list of digits read out quickly"}),(0,a.jsxs)("li",{className:"py-5",children:["Try to remember as many digits as you can from the ",(0,a.jsx)("u",{children:"end of the list"})," (i.e. the ones you hear last)"]}),(0,a.jsx)("li",{className:"py-5",children:"When prompted, enter as many digits as you can remember using the keyboard"}),(0,a.jsx)("li",{className:"py-5",children:"Example:"}),(0,a.jsx)("li",{className:"py-2",children:'If you hear the list "9 3 6 5 4 1 3 5 7 2" try to remember the most recent digits'}),(0,a.jsx)("li",{className:"py-2",children:'If you can only remember the most recent three digits, you\'ll enter "572"'}),(0,a.jsx)("li",{className:"py-2",children:'If you can remember the most recent five digits, you\'ll enter "13572"'}),(0,a.jsx)("li",{className:"py-2",children:"Try to remember as many digits as you can from the end of the list"})]})}),(0,a.jsx)("div",{className:"flex items-end justify-center",children:(0,a.jsxs)("div",{className:"flex items-center text-xl",children:["Press",(0,a.jsx)(g.A,{children:"Enter"}),"to start"]})})]})}var h=r(4963);function E(){let[e,t]=(0,i.useState)(""),r=(0,i.useRef)(null),c=(0,i.useRef)(null),{state:o,setResponseString:d,skipResponseWait:m,exportTrialEventHistory:S}=(()=>{let e=(0,i.useContext)(u);if(!e)throw Error("useTaskContextMemorySpan must be used within a TaskContext Provider");return e})(),{taskData:p,setTaskData:x}=(0,l.S)();return(0,i.useEffect)(()=>{o.blockCompleted&&x([...p,{taskName:"memory-span",data:S()}])},[o.blockCompleted]),(0,i.useEffect)(()=>{o.trialState.responseStarted&&!o.trialState.responseEnded&&r.current&&(t(""),r.current.focus())},[o.trialState.responseStarted,o.trialState.responseEnded]),(0,i.useEffect)(()=>{o.trialState.trialStarted&&!o.trialState.responseStarted&&!o.trialState.trialEnded&&c.current&&(c.current.play(),console.log(c))},[o.trialState.currentDigitIndex,o.trialState.trialStarted,o.trialState.responseStarted,o.trialState.trialEnded]),(0,a.jsxs)("div",{className:"h-full flex flex-col justify-center items-center",children:[o.trialState.responseStarted&&!o.trialState.responseEnded?(0,a.jsxs)("div",{className:"flex flex-col text-xl",children:[(0,a.jsx)("span",{className:"my-10",children:"Enter as many digits as you can remember from the end of the list."}),(0,a.jsx)("input",{type:"text",ref:r,value:e,onChange:e=>{let r=e.target.value;/^\d*$/.test(r)&&t(r)},onKeyDown:t=>{"Enter"===t.key&&(d(e),m())},placeholder:"..."}),(0,a.jsxs)("div",{className:"flex items-center justify-center my-10",children:["Press",(0,a.jsx)(g.A,{children:"Enter"}),"to confirm "]})]}):(0,a.jsx)(a.Fragment,{}),o.blockStarted?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(T,{}),(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[o.fixationActive&&o.blockStarted?(0,a.jsx)(h.A,{}):(0,a.jsx)(a.Fragment,{}),!o.trialState.trialStarted||o.trialState.responseStarted||o.trialState.trialEnded?(0,a.jsx)(a.Fragment,{}):null!==o.trialState.currentDigitIndex?(0,a.jsx)("div",{className:"text-6xl",children:o.trialSpecs[o.currentTrialIndex].digits[o.trialState.currentDigitIndex]}):(0,a.jsx)(a.Fragment,{}),o.trialState.feedbackStarted&&!o.trialState.feedbackEnded?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsxs)("div",{className:"flex flex-col items-right justify-center text-xl",children:[(0,a.jsx)("span",{className:"font-mono text-right py-2",children:o.trialSpecs[o.currentTrialIndex].digits.join("")}),(0,a.jsx)("span",{className:"font-mono text-right py-2",children:(()=>{if(null!==o.trialState.responseString)return console.log(s(o.trialSpecs[o.currentTrialIndex].digits,o.trialState.responseString)),s(o.trialSpecs[o.currentTrialIndex].digits,o.trialState.responseString).map((e,t)=>e?(0,a.jsx)("span",{className:"text-green-600 font-mono",children:o.trialState.responseString[t]},t):(0,a.jsx)("span",{className:"text-grey-300 font-mono",children:o.trialState.responseString[t]},t))})()})]}),(0,a.jsxs)("span",{className:"text-3xl py-10",children:[n(o.trialSpecs[o.currentTrialIndex].digits,o.trialState.responseString)," Correct"]})]}):(0,a.jsx)(a.Fragment,{})]})]})}var y=r(8173),I=r.n(y),v=r(7952);function _(){return(0,a.jsx)("div",{className:"overflow-hidden h-screen",children:(0,a.jsx)(f,{trialSpecs:(function(e,t,r){let a=[];for(let t=0;t<e.length;t++)for(let i=0;i<2;i++){let n=e[t];a.push(function(e,t){let r=I()(t),a="123456789",i=[],n={},s=e=>{if(n[e]>=3||i.slice(-6).includes(e))return!1;if(i.length>0){let t=i[i.length-1];if(e===t+1||e===t-1)return!1}return!0};for(;i.length<e;){let e=(0,v.h)(0,a.length,r),t=parseInt(a[e]);s(t)&&(i.push(t),n[t]=(n[t]||0)+1)}return i}(n,r+t+i*e.length))}return(0,v.R)(a,r)})([12,13,14,15,16,17,18,19,20,21],0,"memory-span").map(e=>({digits:e,maxResponseTime:15e3,feedbackTime:5e3})),startTrialIndex:0,children:(0,a.jsx)(E,{})})})}},4963:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a,i,n=r(5155),s=r(2115);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(null,arguments)}let c=function(e){return s.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:100,height:100},e),a||(a=s.createElement("path",{fill:"currentColor",d:"M45 20h10v60H45z",className:"icon_plus_svg__plus"})),i||(i=s.createElement("path",{fill:"currentColor",d:"M20 45h60v10H20z",className:"icon_plus_svg__plus"})))},o=()=>(0,n.jsx)("div",{className:"h-full text-gray-400 dark:text-gray-600",children:(0,n.jsx)(c,{className:"h-full w-auto max-w-[128px] max-h-[128px] object-contain"})})},6852:(e,t,r)=>{"use strict";r.d(t,{S:()=>c,T:()=>l});var a=r(5155),i=r(63),n=r(2115);let s=(0,n.createContext)(void 0),l=e=>{let{children:t,participantID:r,pages:l,startPageIndex:c}=e,[o,d]=(0,n.useState)(c),[m,u]=(0,n.useState)([]),[S,p]=(0,n.useState)({goNogo:null,visualSearch:null,matrixReasoning:null,memorySpan:null,stringTransformation:null}),x=(0,i.useRouter)();return(0,n.useEffect)(()=>{x.push("/tasks/".concat(l[o]))},[o]),(0,a.jsx)(s.Provider,{value:{participantID:r,pages:l,currentPageIndex:o,taskData:m,scoreData:S,setCurrentPageIndex:d,setTaskData:u,setScoreData:p},children:t})},c=()=>{let e=(0,n.useContext)(s);if(void 0===e)throw Error("usePageContext must be used within a PageProvider");return e}},7828:(e,t,r)=>{"use strict";r.d(t,{G:()=>i});var a=r(4997);function i(e,t,r){return 100*a.ri((r-e)/t)}},7952:(e,t,r)=>{"use strict";r.d(t,{R:()=>s,h:()=>n});var a=r(8173),i=r.n(a);function n(e,t,r){return Math.floor(r()*(t-e))+e}function s(e,t){let r=i()(t),a=[...e];for(let e=a.length-1;e>0;e--){let t=Math.floor(r()*(e+1));[a[e],a[t]]=[a[t],a[e]]}return a}},9141:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(5155);let i=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"px-3 py-2 mx-3 text-sm font-mono font-semibold text-gray-900 bg-white border border-gray-200 rounded-lg shadow-[0px_4px_0px_0px_#aaaaaa]",children:t})}},9445:(e,t,r)=>{Promise.resolve().then(r.bind(r,4010))}},e=>{e.O(0,[256,366,441,255,358],()=>e(e.s=9445)),_N_E=e.O()}]);